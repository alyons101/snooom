<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SNOOOM — Vintage varsity. Modern comfort.</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">

  <style>
    :root {
      --navy: #050c1c;
      --navy-mid: #0d1731;
      --navy-light: #142140;
      --gold: #d8b46d;
      --cream: #f4f0e7;
      --muted: rgba(247, 249, 255, 0.7);
      --text: #f7f9ff;
      --shadow-base: 0 15px 35px rgba(4, 6, 18, 0.55);
      --shadow-hover: 0 25px 55px rgba(0, 0, 0, 0.6);
    }
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: 'Space Grotesk', sans-serif;
      background: var(--navy);
      color: var(--text);
      line-height: 1.7;
      scroll-behavior: smooth;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background:
        radial-gradient(circle at top, rgba(20, 35, 66, 0.5), rgba(5, 12, 28, 0.95)),
        repeating-linear-gradient(135deg, rgba(255, 255, 255, 0.035) 0 2px, transparent 2px 6px);
      pointer-events: none;
      z-index: -2;
    }
    body::after {
      content: '';
      position: fixed;
      inset: 0;
      background: repeating-linear-gradient(0deg, rgba(255, 255, 255, 0.03) 0 1px, transparent 1px 3px);
      mix-blend-mode: soft-light;
      opacity: 0.15;
      pointer-events: none;
      z-index: -1;
    }
    img {
      max-width: 100%;
      display: block;
    }
    a {
      color: var(--gold);
      text-decoration: none;
    }
    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1000;
      background: rgba(4, 10, 24, 0.92);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(216, 180, 109, 0.35);
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.35);
    }
    nav {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem 2rem 0.85rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1.5rem;
    }
    .logo {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      position: relative;
      overflow: hidden;
    }
    .logo::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(120deg, transparent 10%, rgba(255, 255, 255, 0.35) 45%, transparent 70%);
      transform: translateX(-120%);
      opacity: 0;
      transition: transform 0.6s ease, opacity 0.6s ease;
      pointer-events: none;
    }
    .logo:hover::after {
      transform: translateX(120%);
      opacity: 1;
    }
    .logo-img {
      height: 46px;
      width: auto;
      display: block;
      filter: drop-shadow(0 10px 25px rgba(0, 0, 0, 0.6));
    }
    .nav-links {
      display: flex;
      gap: 1.25rem;
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      align-items: center;
    }
    .nav-links a {
      position: relative;
      padding-bottom: 0.25rem;
      color: var(--text);
    }
    .nav-links a::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: 0;
      width: 100%;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
      transform: scaleX(0);
      transform-origin: center;
      transition: transform 0.3s ease;
    }
    .nav-links a:hover::after {
      transform: scaleX(1);
    }

    /* Nav cart and account buttons */
    .nav-links .btn {
      padding: 0.45rem 1.4rem;
      font-size: 0.75rem;
      letter-spacing: 0.12em;
      box-shadow: none;
    }
    .nav-links .btn.snipcart-checkout {
      background: rgba(255, 255, 255, 0.06);
      border-color: rgba(255, 255, 255, 0.25);
    }
    .nav-links .btn.snipcart-checkout:hover {
      box-shadow: var(--shadow-base);
    }
    .nav-cart {
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }
    .snipcart-items-count {
      margin-left: 0.25rem;
    }
    .snipcart-total-price {
      margin-left: 0.5rem;
      font-weight: 500;
      opacity: 0.85;
    }

    main {
      margin-top: 100px;
    }
    section {
      padding: clamp(3.5rem, 8vw, 5rem) 1.5rem;
    }
    .hero {
      min-height: calc(100vh - 90px);
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      align-items: center;
      gap: 3rem;
      max-width: 1200px;
      margin: 0 auto;
    }
    .hero-text h1 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(3.4rem, 6.4vw, 5.4rem);
      line-height: 1.05;
      margin-bottom: 1rem;
      letter-spacing: -0.01em;
      text-shadow: 0 20px 50px rgba(0, 0, 0, 0.55);
    }
    .hero-label {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      text-transform: uppercase;
      letter-spacing: 0.25em;
      font-size: 0.8rem;
      color: var(--muted);
      padding: 0.4rem 0.8rem;
      border: 1px solid rgba(216, 180, 109, 0.4);
      border-radius: 999px;
      margin-bottom: 1rem;
    }
    .hero-label::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--gold);
    }
    .tagline {
      font-size: 1.05rem;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--muted);
      margin-bottom: 1.25rem;
    }
    .hero-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
    }
    .btn {
      border: 1px solid rgba(255, 255, 255, 0.15);
      padding: 0.9rem 2.2rem;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      font-size: 0.85rem;
      color: var(--text);
      background: rgba(255, 255, 255, 0.03);
      border-radius: 999px;
      transition: transform 0.35s ease, box-shadow 0.35s ease, background 0.35s ease, color 0.35s ease;
      box-shadow: var(--shadow-base);
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }
    .btn.primary {
      background: linear-gradient(135deg, #f7d18b, var(--gold));
      color: var(--navy);
      border: none;
      font-weight: 600;
      box-shadow: 0 25px 45px rgba(216, 180, 109, 0.4);
    }
    .btn:hover {
      transform: translateY(-4px) scale(1.02);
      box-shadow: var(--shadow-hover);
    }
    .btn .ripple {
      position: absolute;
      border-radius: 50%;
      transform: scale(0);
      background: rgba(255, 255, 255, 0.35);
      animation: ripple 0.6s ease-out;
      pointer-events: none;
    }
    @keyframes ripple {
      to {
        transform: scale(12);
        opacity: 0;
      }
    }
    .hero-image {
      position: relative;
      text-align: center;
      isolation: isolate;
    }
    .hero-image::before {
      content: '';
      position: absolute;
      inset: 10%;
      background: radial-gradient(circle, rgba(247, 209, 139, 0.3), transparent 60%);
      filter: blur(30px);
      z-index: -1;
    }
    .hero-image img {
      width: 100%;
      max-width: 440px;
      margin: 0 auto;
      filter: drop-shadow(0 30px 80px rgba(0, 0, 0, 0.55));
      border-radius: 28px;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.08), transparent 70%);
      transition: transform 0.6s ease, filter 0.6s ease;
    }
    .hero-image:hover img {
      transform: scale(1.02);
      filter: drop-shadow(0 45px 90px rgba(0, 0, 0, 0.65));
    }
    .hoodie-breathe img {
      animation: hoodieBreath 4s ease-in-out infinite;
    }
    @keyframes hoodieBreath {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.01); }
    }
    .floating-section {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 3rem;
      align-items: center;
    }
    .floating-image {
      position: relative;
    }
    .floating-image img {
      width: 100%;
      max-width: 420px;
      margin: 0 auto;
      filter: drop-shadow(0 40px 70px rgba(0, 0, 0, 0.6));
      transition: transform 0.6s ease;
      border-radius: 32px;
      box-shadow: 0 0 60px rgba(216, 180, 109, 0.25);
      background: radial-gradient(circle, rgba(255, 255, 255, 0.04), transparent 60%);
    }
    .floating-copy h2 {
      font-size: 2.3rem;
      margin-bottom: 1rem;
    }
    .drop-badge {
      display: inline-block;
      margin: 1rem 0 1.5rem;
      padding: 0.5rem 1.2rem;
      border: 1px solid rgba(216, 180, 109, 0.6);
      border-radius: 999px;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      background: rgba(255, 255, 255, 0.03);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
    }
    .size-selector {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    .size-selector button {
      border: none;
      padding: 0.45rem 1.2rem;
      border-radius: 999px;
      background: rgba(244, 240, 231, 0.2);
      color: var(--navy);
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
      transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
      cursor: pointer;
    }
    .size-selector button:hover,
    .size-selector button:focus {
      background: rgba(244, 240, 231, 0.35);
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 18px 35px rgba(0, 0, 0, 0.35);
      outline: none;
    }
    .size-selector button.active {
      background: rgba(244, 240, 231, 0.9);
      box-shadow: 0 16px 32px rgba(0, 0, 0, 0.35);
    }
    .quantity-selector {
      display: inline-flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1.5rem;
      padding: 0.5rem 1rem;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.03);
      box-shadow: 0 12px 28px rgba(0, 0, 0, 0.35);
    }
    .qty-btn {
      width: 38px;
      height: 38px;
      border-radius: 50%;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: rgba(244, 240, 231, 0.15);
      color: var(--text);
      font-size: 1.2rem;
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
    }
    .qty-btn:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.45);
      background: rgba(244, 240, 231, 0.25);
    }
    .qty-number {
      font-size: 1.2rem;
      letter-spacing: 0.08em;
    }
    .floating-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
    }
    .gallery-thumbs {
      display: grid;
      grid-template-columns: repeat(4, minmax(60px, 1fr));
      gap: 0.75rem;
      margin-top: 2rem;
    }
    .gallery-thumbs img,
    .closeup-grid img,
    .about-content img {
      border-radius: 18px;
      box-shadow: var(--shadow-base);
      transition: transform 0.35s ease, box-shadow 0.35s ease;
      cursor: pointer;
    }
    .gallery-thumbs img:hover,
    .closeup-grid img:hover,
    .about-content img:hover {
      transform: translateY(-4px) scale(1.02);
      box-shadow: var(--shadow-hover);
    }
    .section-title {
      font-size: 2.3rem;
      margin-bottom: 2.5rem;
      position: relative;
      display: inline-flex;
      gap: 0.75rem;
      align-items: center;
    }
    .section-title::after {
      content: '';
      width: 0;
      height: 2px;
      background: linear-gradient(90deg, var(--gold), transparent);
      transition: width 0.4s ease;
    }
    .section-title.visible::after {
      width: 64px;
    }
    .showcase,
    .closeup,
    .details,
    .size-guide,
    .about,
    .testimonials,
    .drop,
    .ceo-section,
    .shipping-returns {
      max-width: 1200px;
      margin: 0 auto;
    }
    .showcase img {
      border-radius: 28px;
      box-shadow: var(--shadow-base);
    }
    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1.5rem;
    }
    .card,
    .testimonial-card,
    .field-note-card,
    .drop form,
    .about-content img,
    .closeup-grid img,
    .gallery-thumbs img {
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.06);
    }
    .card {
      padding: 1.75rem;
      border-radius: 22px;
      box-shadow: var(--shadow-base);
      transition: transform 0.35s ease, box-shadow 0.35s ease;
    }
    .card:hover {
      transform: translateY(-4px) scale(1.02);
      box-shadow: var(--shadow-hover);
    }
    .closeup-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.25rem;
    }
    .details-tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-bottom: 1.5rem;
    }
    .tab-btn {
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: transparent;
      color: var(--text);
      padding: 0.6rem 1.2rem;
      border-radius: 999px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      cursor: pointer;
      transition: background 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
    }
    .tab-btn.active,
    .tab-btn:hover {
      background: rgba(216, 180, 109, 0.15);
      color: var(--gold);
      box-shadow: 0 12px 28px rgba(216, 180, 109, 0.25);
    }
    .tab-content {
      background: rgba(6, 9, 24, 0.7);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 20px;
      padding: 1.75rem;
      box-shadow: var(--shadow-base);
    }
    .tab-content ul {
      list-style: none;
      padding-left: 1rem;
    }
    .tab-content li {
      position: relative;
      padding-left: 1rem;
      margin-bottom: 0.5rem;
    }
    .tab-content li::before {
      content: '-';
      position: absolute;
      left: 0;
      color: var(--gold);
    }

    /* Shipping and returns */
    .shipping-returns {
      padding-top: 1rem;
      padding-bottom: 4rem;
    }
    .shipping-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 1.5rem;
    }
    .shipping-note {
      margin-top: 1.25rem;
      font-size: 0.9rem;
      color: var(--muted);
    }

    .size-guide .card table {
      width: 100%;
      border-collapse: collapse;
      text-align: left;
    }
    .size-guide .card th,
    .size-guide .card td {
      padding: 0.55rem 0.35rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    }
    .size-guide .card th {
      color: var(--gold);
      font-weight: 600;
    }
    .about-content {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 2rem;
      align-items: center;
    }
    .about-content img {
      width: 100%;
    }
    .testimonials {
      display: grid;
      gap: 2.5rem;
    }
    .field-notes-wrapper {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 2rem;
      align-items: center;
    }
    .field-note-stack-wrapper {
      display: flex;
      flex-direction: column;
      gap: 1.25rem;
    }
    .notes-progress-bar {
      width: 100%;
      height: 4px;
      background: rgba(255, 255, 255, 0.12);
      border-radius: 999px;
      margin-top: 1.5rem;
      overflow: hidden;
    }
    .notes-progress-fill {
      height: 100%;
      width: 0;
      background: linear-gradient(90deg, rgba(247, 209, 139, 0.9), rgba(216, 180, 109, 0.7));
    }
    .notes-progress-fill.animating {
      animation: notesProgress 6.5s linear forwards;
    }
    @keyframes notesProgress {
      from { width: 0; }
      to { width: 100%; }
    }
    .field-notes-visual img {
      border-radius: 28px;
      box-shadow: var(--shadow-base);
      cursor: pointer;
    }
    .field-note-stack {
      position: relative;
      min-height: 320px;
    }
    .field-note-card {
      position: absolute;
      inset: 0;
      padding: 2rem;
      border-radius: 26px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      background: rgba(8, 12, 28, 0.8);
      opacity: 0;
      transform: translateY(15px);
      pointer-events: none;
      transition: opacity 0.45s ease, transform 0.45s ease;
      display: flex;
      flex-direction: column;
      gap: 1.25rem;
      box-shadow: var(--shadow-base);
    }
    .field-note-card.active {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }
    .field-note-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      color: var(--muted);
    }
    .field-note-avatar {
      width: 64px;
      height: 64px;
      border-radius: 50%;
      border: 2px solid var(--gold);
      padding: 0.2rem;
      object-fit: cover;
      background: rgba(255, 255, 255, 0.05);
    }
    .field-note-quote {
      font-size: 1.15rem;
      line-height: 1.6;
      color: var(--muted);
    }
    .field-note-author {
      font-size: 1rem;
      font-weight: 600;
      margin-top: 0.75rem;
      color: var(--text);
    }
    .drop {
      margin-top: 1rem;
      padding: 5rem 1.5rem 6rem;
    }
    .drop-inner {
      background: radial-gradient(circle at top, rgba(10, 20, 45, 0.95), rgba(4, 9, 20, 0.95));
      border: 1px solid rgba(216, 180, 109, 0.35);
      border-radius: 32px;
      padding: 3rem;
      box-shadow: 0 40px 90px rgba(0, 0, 0, 0.5);
    }
    .drop .section-title {
      font-size: 2.6rem;
    }
    .drop form {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1rem;
      padding: 1rem;
      border-radius: 28px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      background: rgba(255, 255, 255, 0.03);
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.02);
    }
    .drop form input,
    .drop form select {
      width: 100%;
      padding: 0.9rem 1.2rem;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      background: rgba(0, 0, 0, 0.3);
      color: var(--text);
      font-size: 0.95rem;
    }
    .drop form select {
      appearance: none;
      background-image: linear-gradient(45deg, transparent 50%, var(--gold) 50%), linear-gradient(135deg, var(--gold) 50%, transparent 50%);
      background-position: calc(100% - 20px) calc(50% + 2px), calc(100% - 14px) calc(50% + 2px);
      background-size: 6px 6px;
      background-repeat: no-repeat;
      padding-right: 2.5rem;
    }
    .drop .btn.primary {
      padding: 0.95rem 2.4rem;
      font-size: 0.95rem;
      letter-spacing: 0.18em;
      width: 100%;
    }
    #dropStateMessage {
      margin-bottom: 1rem;
      font-size: 1.05rem;
      color: var(--muted);
    }
    .form-note {
      margin-top: 1rem;
      color: var(--muted);
      font-size: 0.9rem;
    }
    .message {
      margin-top: 1rem;
      font-weight: 600;
    }
    .referral-link {
      margin-top: 0.5rem;
      color: var(--muted);
      font-size: 0.9rem;
    }
    .ceo-section {
      padding-top: 3rem;
      padding-bottom: 5rem;
    }
    .ceo-content {
      background: rgba(6, 12, 30, 0.85);
      border-radius: 30px;
      padding: 3rem;
      border: 1px solid rgba(216, 180, 109, 0.35);
      box-shadow: var(--shadow-base);
    }
    .ceo-content h2 {
      font-size: 2.4rem;
      margin-bottom: 0.5rem;
      position: relative;
      display: inline-block;
    }
    .ceo-content h2::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: -0.4rem;
      width: 80px;
      height: 2px;
      background: linear-gradient(90deg, var(--gold), transparent);
    }
    .ceo-content h3 {
      font-size: 1.2rem;
      color: var(--gold);
      margin-bottom: 1.5rem;
    }
    .weight-demo {
      margin-top: 3rem;
      padding: 2rem;
      border-radius: 24px;
      background: rgba(9, 17, 38, 0.95);
      box-shadow: var(--shadow-base);
    }
    .weight-demo h3 {
      margin-bottom: 1rem;
    }
    .weight-bars {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }
    .weight-row {
      display: grid;
      grid-template-columns: 130px 1fr 60px;
      align-items: center;
      gap: 0.75rem;
    }
    .weight-row .bar {
      height: 10px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.08);
      overflow: hidden;
    }
    .weight-row .bar-fill {
      display: block;
      height: 100%;
      width: 0;
      border-radius: inherit;
      transition: width 1.2s ease;
    }
    .bar-snooom .bar-fill {
      background: linear-gradient(90deg, #f7d18b, var(--gold));
    }
    .bar-typical .bar-fill {
      background: rgba(255, 255, 255, 0.3);
    }
    .weight-demo.visible .bar-snooom .bar-fill {
      width: 90%;
    }
    .weight-demo.visible .bar-typical .bar-fill {
      width: 55%;
    }
    .weight-caption {
      margin-top: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.2em;
      color: var(--muted);
    }
    .access-code {
      margin-top: 0.75rem;
      font-family: 'Space Grotesk', system-ui, sans-serif;
      font-size: 0.95rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--cream);
      padding: 0.6rem 1rem;
      border-radius: 999px;
      border: 1px dashed rgba(255, 255, 255, 0.35);
      background: rgba(8, 21, 44, 0.7);
      display: inline-block;
    }
    footer {
      text-align: center;
      padding: 2.5rem 1rem;
      background: rgba(4, 9, 20, 0.95);
      border-top: 1px solid rgba(216, 180, 109, 0.3);
    }
    footer img {
      width: 48px;
      margin: 0 auto 1rem;
    }
    footer p {
      color: var(--muted);
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }
    .lightbox {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      z-index: 2000;
    }
    .lightbox.active {
      opacity: 1;
      pointer-events: all;
    }
    .lightbox-img {
      max-width: 90vw;
      max-height: 85vh;
      border-radius: 24px;
      box-shadow: var(--shadow-hover);
      transform: scale(0.95);
      transition: transform 0.35s ease;
    }
    .lightbox.active .lightbox-img {
      transform: scale(1);
    }
    .lightbox-close {
      position: absolute;
      top: 30px;
      right: 40px;
      font-size: 2rem;
      color: var(--cream);
      cursor: pointer;
    }
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .reveal {
      opacity: 0;
      transform: translateY(40px);
    }
    .reveal.visible {
      animation: fadeUp 0.85s ease forwards;
    }

    /* ACCOUNT CENTER SECTION */

    .account-section {
      max-width: 1200px;
      margin: 0 auto 4rem;
      padding-top: 2rem;
    }
    .account-shell {
      background: rgba(6, 12, 30, 0.96);
      border-radius: 24px;
      border: 1px solid rgba(216, 180, 109, 0.3);
      padding: 1.75rem 1.75rem 2rem;
      box-shadow: 0 22px 60px rgba(0, 0, 0, 0.65);
      max-width: 720px;
      margin: 0 auto;
      color: var(--text);
      font-size: 0.95rem;
    }
    .account-shell h2 {
      font-size: 2rem;
      margin-bottom: 1rem;
    }
    .account-header {
      display: flex;
      align-items: center;
      gap: 1.25rem;
      margin-bottom: 1.5rem;
    }
    .account-avatar {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 20%, #f7d18b, #b58c4b);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 1.25rem;
      color: var(--navy);
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.6);
    }
    .account-user-meta {
      flex: 1;
    }
    .account-label {
      text-transform: uppercase;
      letter-spacing: 0.14em;
      font-size: 0.7rem;
      color: var(--muted);
      margin-bottom: 0.15rem;
    }
    .account-name {
      font-size: 1.1rem;
      font-weight: 600;
    }
    .account-email {
      font-size: 0.9rem;
      color: var(--muted);
    }
    .account-logout-btn {
      padding-inline: 1.3rem;
      font-size: 0.8rem;
    }

    .account-tabs {
      margin: 0.75rem 0 1.4rem;
      display: inline-flex;
      padding: 0.25rem;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.05);
    }
    .account-tab {
      border: none;
      background: transparent;
      color: var(--muted);
      padding: 0.5rem 1.3rem;
      border-radius: 999px;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      cursor: pointer;
      transition: background 0.25s ease, color 0.25s ease;
    }
    .account-tab.active {
      background: rgba(216, 180, 109, 0.16);
      color: var(--gold);
    }

    .account-panel {
      display: none;
      margin-top: 0.5rem;
    }
    .account-panel.active {
      display: block;
    }
    .account-section-title {
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    .account-section-copy {
      color: var(--muted);
      margin-bottom: 1rem;
    }

    .account-meta-list {
      list-style: none;
      margin: 0 0 1.2rem;
      padding: 0;
    }
    .account-meta-list li {
      display: flex;
      justify-content: space-between;
      padding: 0.4rem 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.06);
    }
    .account-meta-list span {
      color: var(--muted);
      font-size: 0.85rem;
    }
    .account-meta-list strong {
      font-size: 0.9rem;
    }
    .account-secondary-btn {
      font-size: 0.8rem;
      padding: 0.7rem 1.5rem;
      background: rgba(255, 255, 255, 0.05);
    }

    .account-auth-form {
      margin-top: 1rem;
      padding: 0.9rem 1.1rem;
      border-radius: 18px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      background: rgba(0, 0, 0, 0.25);
    }
    .account-auth-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 0.75rem;
      margin-bottom: 0.75rem;
    }
    .account-auth-form input {
      width: 100%;
      padding: 0.7rem 0.85rem;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      background: rgba(0, 0, 0, 0.35);
      color: var(--text);
      font-size: 0.85rem;
    }
    .account-auth-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: center;
      justify-content: flex-start;
    }
    .account-auth-mode {
      font-size: 0.8rem;
      color: var(--muted);
    }
    .account-auth-toggle {
      border: none;
      background: none;
      color: var(--gold);
      cursor: pointer;
      font-size: 0.8rem;
      margin-left: 0.2rem;
      text-decoration: underline;
    }
    .account-auth-message {
      margin-top: 0.4rem;
      font-size: 0.8rem;
      color: var(--muted);
    }

    .account-orders-list {
      margin-top: 0.75rem;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    .account-order-card {
      border-radius: 18px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      background: rgba(3, 7, 20, 0.9);
      padding: 0.9rem 1rem;
    }
    .account-order-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.4rem;
      gap: 1rem;
    }
    .account-order-id {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--muted);
    }
    .account-order-total {
      font-weight: 600;
      white-space: nowrap;
      font-size: 0.95rem;
    }
    .account-order-meta {
      font-size: 0.8rem;
      color: var(--muted);
    }
    .account-order-status {
      display: inline-block;
      padding: 0.18rem 0.6rem;
      border-radius: 999px;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      margin-top: 0.25rem;
    }
    .account-order-status.paid {
      background: rgba(75, 222, 151, 0.16);
      color: #8bf2c4;
    }
    .account-order-status.pending {
      background: rgba(247, 209, 139, 0.18);
      color: #f7d18b;
    }
    .account-order-status.failed,
    .account-order-status.refunded,
    .account-order-status.canceled {
      background: rgba(255, 123, 123, 0.18);
      color: #ff9a9a;
    }
    .account-order-items {
      margin-top: 0.5rem;
      font-size: 0.8rem;
      color: var(--muted);
    }
    .account-order-items strong {
      color: var(--text);
    }
    .account-order-items.collapsed {
      display: none;
    }
    .account-order-toggle {
      margin-top: 0.35rem;
      font-size: 0.8rem;
      cursor: pointer;
      color: var(--gold);
    }
    .account-order-actions {
      margin-top: 0.55rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      font-size: 0.8rem;
    }
    .account-order-actions a,
    .account-order-actions button {
      font-size: 0.78rem;
      padding: 0.4rem 0.8rem;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.16);
      background: rgba(255, 255, 255, 0.03);
      color: var(--text);
      cursor: pointer;
    }
    .account-order-actions a[aria-disabled="true"] {
      opacity: 0.6;
      cursor: default;
      pointer-events: none;
    }

    .account-state-text {
      font-size: 0.85rem;
      color: var(--muted);
      margin-top: 0.35rem;
    }

    /* Admin tools */
    .admin-tools {
      margin-top: 1.7rem;
      border-top: 1px solid rgba(255, 255, 255, 0.12);
      padding-top: 1rem;
    }
    .admin-tag {
      display: inline-block;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      padding: 0.2rem 0.7rem;
      border-radius: 999px;
      background: rgba(216, 180, 109, 0.16);
      color: var(--gold);
      margin-bottom: 0.4rem;
    }
    .admin-order-controls {
      margin-top: 0.55rem;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 0.45rem;
      font-size: 0.78rem;
    }
    .admin-order-controls input,
    .admin-order-controls select {
      width: 100%;
      padding: 0.35rem 0.55rem;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      background: rgba(0, 0, 0, 0.35);
      color: var(--text);
      font-size: 0.78rem;
    }
    .admin-order-controls button {
      padding: 0.35rem 0.7rem;
      border-radius: 999px;
      border: 1px solid rgba(216, 180, 109, 0.6);
      background: rgba(216, 180, 109, 0.1);
      color: var(--gold);
      cursor: pointer;
      font-size: 0.78rem;
    }
    .admin-helper {
      font-size: 0.78rem;
      color: var(--muted);
      margin-bottom: 0.4rem;
    }

    @media (max-width: 768px) {
      nav {
        flex-direction: column;
      }
      .nav-links {
        flex-wrap: wrap;
        justify-content: center;
      }
      .hero {
        text-align: center;
      }
      .hero-actions {
        justify-content: center;
      }
      .drop-inner {
        padding: 2rem;
      }
      .field-notes-wrapper {
        grid-template-columns: 1fr;
      }
      .account-shell {
        padding: 1.25rem 1.25rem 1.5rem;
      }
      .account-header {
        align-items: flex-start;
      }
      .account-logout-btn {
        padding-inline: 1rem;
      }
    }
  </style>
</head>
<body id="top">
  <header>
    <nav>
      <a href="#top" class="logo">
        <img src="0475b64d-f67d-4a80-a3ab-bc20f79e3667.png" alt="SNOOOM logo" class="logo-img">
      </a>
      <div class="nav-links">
        <a href="#hero">Hero</a>
        <a href="#floating">Product</a>
        <a href="#details">Details</a>
        <a href="#shipping">Shipping</a>
        <a href="#drop">Drop</a>
        <a href="#ceo">CEO</a>
        <a href="#account-center" class="btn">Account</a>
        <div class="snipcart-summary nav-cart">
          <button type="button" class="btn snipcart-checkout">
            Cart <span class="snipcart-items-count">0</span>
            <span class="snipcart-total-price"></span>
          </button>
        </div>
      </div>
    </nav>
  </header>

  <main>
    <section class="hero" id="hero">
      <div class="hero-text reveal">
        <p class="hero-label">Drop 01: The SNOOOM Hoodie</p>
        <p class="tagline">Vintage varsity. Modern comfort.</p>
        <h1>The SNOOOM Hoodie makes every hallway feel like a stadium tunnel.</h1>
        <p>Vintage varsity style with modern comfort.<br>The SNOOOM Hoodie is crafted for chilly mornings, late-night work sessions, and the everyday moments in between.</p>
        <div class="hero-actions">
          <a href="#floating" class="btn primary" id="hero-primary-cta" data-log-event="cta_click" data-log-location="hero_primary">Explore the drop</a>
          <a href="#drop" class="btn" id="hero-secondary-cta" data-log-event="cta_click" data-log-location="hero_secondary">Get early access</a>
        </div>
      </div>
      <div class="hero-image reveal hoodie-breathe">
        <img src="5a3e387b-fde8-4828-bc0c-25d11cc0f644.png" alt="SNOOOM Hoodie">
      </div>
    </section>

    <section id="floating">
      <div class="floating-section">
        <div class="floating-image reveal">
          <img id="parallax-hoodie" src="f8e37b5e-5e45-4191-b631-f3f9c22ba0f2.png" alt="SNOOOM floating hoodie">
        </div>
        <div class="floating-copy reveal">
          <h2>The varsity hoodie, remixed.</h2>
          <p>Structured shoulders, retro ribbing, and a plush brushed interior create a silhouette that feels nostalgic yet future-ready. Every stitch was mapped for longevity.</p>
          <div class="drop-badge">DROPPING SOON</div>
          <div class="size-selector">
            <button type="button">S</button>
            <button type="button">M</button>
            <button type="button">L</button>
            <button type="button">XL</button>
            <button type="button">XXL</button>
          </div>
          <div class="quantity-selector">
            <button type="button" class="qty-btn minus">−</button>
            <span class="qty-number" id="qty-number">1</span>
            <button type="button" class="qty-btn plus">+</button>
          </div>
          <div class="floating-buttons">
            <button
              type="button"
              class="btn primary snipcart-add-item"
              data-item-id="snooom-hoodie-001"
              data-item-name="SNOOOM Hoodie"
              data-item-price="168.00"
              data-item-url="/"
              data-item-description="Vintage varsity hoodie in heavyweight fleece"
              data-item-custom1-name="Size"
              data-item-custom1-options="S|M|L|XL|XXL"
              data-item-custom1-required="true"
              data-item-quantity="1"
            >
              Add to cart
            </button>
            <a href="#drop" class="btn" data-log-event="cta_click" data-log-location="product_primary">Get early access</a>
            <a href="#details" class="btn" data-log-event="cta_click" data-log-location="product_secondary">View details</a>
          </div>
          <div class="gallery-thumbs">
            <img class="thumbnail lightbox-trigger" src="f899a50a-1633-4531-9858-e91c937b86bc.png" alt="SNOOOM Hoodie detail">
            <img class="thumbnail lightbox-trigger" src="beb850c2-99cd-4314-9be8-5acffd895c13.png" alt="SNOOOM Hoodie detail">
            <img class="thumbnail lightbox-trigger" src="415d54f5-2d00-4d12-b3bd-288473a8e9ca.png" alt="SNOOOM Hoodie detail">
            <img class="thumbnail lightbox-trigger" src="80adef90-1e9f-4acb-b876-aeb14d318391.png" alt="SNOOOM Hoodie detail">
          </div>
        </div>
      </div>
    </section>

    <section class="showcase" id="showcase">
      <h2 class="section-title reveal">Showcase</h2>
      <img class="reveal lightbox-trigger" src="80adef90-1e9f-4acb-b876-aeb14d318391.png" alt="SNOOOM Hoodie showcase">
      <p class="reveal">Layered hues of midnight navy and aged cream reference classic varsity banners, while the updated tailoring keeps everything clean and contemporary.</p>
    </section>

    <section class="features" id="features">
      <h2 class="section-title reveal">Features</h2>
      <div class="feature-grid">
        <article class="card reveal">
          <h3>Vintage varsity look</h3>
          <p>Inspired by collegiate warm-ups with bold taping, ribbed cuffs, and the SNOOOM crest stitched using metallic threads.</p>
        </article>
        <article class="card reveal">
          <h3>Heavyweight comfort</h3>
          <p>400g heavyweight fleece with a brushed interior delivers warmth without bulk, perfect for early mornings, cold commutes, and late-night sessions.</p>
        </article>
        <article class="card reveal">
          <h3>Longevity</h3>
          <p>Reinforced seams and double-needle stitching keep the structure crisp wash after wash.</p>
        </article>
        <article class="card reveal">
          <h3>Everyday essential</h3>
          <p>Minimal branding and tonal palette make it easy to pair with denim, tailoring, or athleisure.</p>
        </article>
      </div>
      <div class="weight-demo reveal">
        <h3>Built with real weight</h3>
        <div class="weight-bars">
          <div class="weight-row">
            <span class="label">SNOOOM Hoodie</span>
            <div class="bar bar-snooom"><span class="bar-fill"></span></div>
            <span class="value">400g</span>
          </div>
          <div class="weight-row">
            <span class="label">Typical hoodie</span>
            <div class="bar bar-typical"><span class="bar-fill"></span></div>
            <span class="value">250g</span>
          </div>
        </div>
        <p class="weight-caption">Heavy. Durable. Real.</p>
      </div>
    </section>

    <section class="closeup" id="closeup">
      <h2 class="section-title reveal">Close-up Grid</h2>
      <div class="closeup-grid">
        <img class="reveal lightbox-trigger" src="80adef90-1e9f-4acb-b876-aeb14d318391.png" alt="Close-up 1">
        <img class="reveal lightbox-trigger" src="415d54f5-2d00-4d12-b3bd-288473a8e9ca.png" alt="Close-up 2">
        <img class="reveal lightbox-trigger" src="f899a50a-1633-4531-9858-e91c937b86bc.png" alt="Close-up 3">
        <img class="reveal lightbox-trigger" src="beb850c2-99cd-4314-9be8-5acffd895c13.png" alt="Close-up 4">
      </div>
    </section>

    <section class="details" id="details">
      <h2 class="section-title reveal">Details</h2>
      <div class="details-tabs">
        <button class="tab-btn active" data-tab="material">Material</button>
        <button class="tab-btn" data-tab="fit">Fit &amp; Feel</button>
        <button class="tab-btn" data-tab="wash">Wash &amp; Care</button>
      </div>
      <div class="tab-content" id="tab-content"></div>
    </section>

    <!-- Shipping & Returns -->
    <section class="shipping-returns" id="shipping">
      <h2 class="section-title reveal">Shipping &amp; Returns</h2>
      <div class="shipping-grid">
        <article class="card reveal">
          <h3>Shipping</h3>
          <p>We pack and ship each SNOOOM Hoodie with care so it arrives ready to wear.</p>
          <ul>
            <li>Tracked shipping on every order</li>
            <li>Processing time usually 1 to 3 business days</li>
            <li>Shipping confirmation with tracking link sent to your inbox</li>
          </ul>
        </article>
        <article class="card reveal">
          <h3>Returns</h3>
          <p>If the fit is not right, you still have options.</p>
          <ul>
            <li>Easy returns within 14 days of delivery on unworn items</li>
            <li>Exchange for a different size where stock allows</li>
            <li>Support team ready to help you get the fit dialed in</li>
          </ul>
        </article>
      </div>
      <p class="shipping-note reveal">
        Questions about your order? Email
        <a href="mailto:hello@snooom.co">hello@snooom.co</a> and the SNOOOM team will take care of you.
      </p>
    </section>

    <section class="size-guide" id="size-guide">
      <h2 class="section-title reveal">Size Guide</h2>
      <p class="reveal">Choose your fit using height and weight pairings based on the SNOOOM Hoodie wear-test crew.</p>
      <div class="card reveal">
        <h3>Men</h3>
        <table>
          <tr><th>Size</th><th>Weight</th><th>Height</th></tr>
          <tr><td>S</td><td>55 to 65 kg</td><td>160 to 172 cm</td></tr>
          <tr><td>M</td><td>65 to 75 kg</td><td>170 to 178 cm</td></tr>
          <tr><td>L</td><td>75 to 85 kg</td><td>176 to 185 cm</td></tr>
          <tr><td>XL</td><td>85 to 95 kg</td><td>183 to 192 cm</td></tr>
          <tr><td>XXL</td><td>95 to 110 kg</td><td>190 to 200 cm</td></tr>
        </table>
      </div>
      <div class="card reveal" style="margin-top:1.5rem;">
        <h3>Women</h3>
        <table>
          <tr><th>Size</th><th>Weight</th><th>Height</th></tr>
          <tr><td>S</td><td>45 to 55 kg</td><td>150 to 165 cm</td></tr>
          <tr><td>M</td><td>55 to 65 kg</td><td>160 to 172 cm</td></tr>
          <tr><td>L</td><td>65 to 75 kg</td><td>168 to 178 cm</td></tr>
          <tr><td>XL</td><td>75 to 90 kg</td><td>175 to 185 cm</td></tr>
          <tr><td>XXL</td><td>90 to 105 kg</td><td>180 to 190 cm</td></tr>
        </table>
      </div>
    </section>

    <section class="about" id="about">
      <h2 class="section-title reveal">About SNOOOM</h2>
      <div class="about-content">
        <div class="reveal">
          <p>SNOOOM merges timeless varsity cues with modern comfort. Our pieces stay sharp for early starts, late nights, and everything that unfolds in between.</p>
          <p>Crafted in small batches with premium materials, the SNOOOM Hoodie is for people who want versatile essentials built to last. Be part of the movement before it becomes the trend.</p>
        </div>
        <div class="reveal">
          <img class="lightbox-trigger" src="f899a50a-1633-4531-9858-e91c937b86bc.png" alt="SNOOOM Hoodie lifestyle">
        </div>
      </div>
    </section>

    <section class="testimonials field-notes" id="testimonials">
      <h2 class="section-title reveal">Field Notes</h2>
      <div class="field-notes-wrapper">
        <div class="field-note-stack-wrapper">
          <div class="field-note-stack" id="field-note-stack"></div>
          <div class="notes-progress-bar">
            <div class="notes-progress-fill" id="notes-progress"></div>
          </div>
        </div>
        <div class="field-notes-visual reveal">
          <img class="lightbox-trigger" src="415d54f5-2d00-4d12-b3bd-288473a8e9ca.png" alt="SNOOOM Hoodie in the wild">
        </div>
      </div>
    </section>

    <section class="drop" id="drop">
      <div class="drop-inner reveal">
        <h2 class="section-title">Drop List</h2>
        <p id="dropStateMessage">The SNOOOM Hoodie is dropping soon. Join the list and get early access plus styling inspiration straight to your inbox.</p>
        <form id="notify-form">
          <input type="text" id="signup-name" placeholder="Your name" autocomplete="name" required>
          <input type="email" id="email" placeholder="you@email.com" autocomplete="email" required>
          <select id="signup-size" required>
            <option value="">Select size</option>
            <option value="S">S</option>
            <option value="M">M</option>
            <option value="L">L</option>
            <option value="XL">XL</option>
            <option value="XXL">XXL</option>
          </select>
          <button type="submit" class="btn primary" id="dropSubmit" data-log-event="cta_click" data-log-location="drop_form">Get early access</button>
        </form>
        <p class="form-note">No spam. Just drop dates and styling inspo.</p>
        <p class="message" id="formMessage"></p>
        <p id="accessCode" class="access-code"></p>
        <p id="referralLink" class="referral-link"></p>
      </div>
    </section>

    <section id="ceo" class="ceo-section">
      <div class="ceo-content reveal">
        <h2>Meet the Founder</h2>
        <h3>Aaron Lyons, CEO &amp; Creative Lead</h3>
        <p class="ceo-story">
          SNOOOM started because I could never find a hoodie that actually fit my life. Everything was either cheap, too loud, or just did not feel right. I wanted something I could wear to school, chill in, travel in, go out in, all without switching fits.
          <br><br>
          Nothing hit the way I wanted, so I made it myself. SNOOOM is built for people who want something clean, solid, and versatile without trying too hard.
          <br><br>
          The goal was simple, make a hoodie that becomes your everyday one, the piece you grab without thinking because it always looks and feels right.
        </p>
      </div>
    </section>

    <!-- ACCOUNT CENTER: full page order history and profile -->
    <section id="account-center" class="account-section">
      <h2 class="section-title reveal">Account center</h2>
      <div class="account-shell reveal">
        <div class="account-header">
          <div class="account-avatar" id="accountAvatar">S</div>
          <div class="account-user-meta">
            <p class="account-label">Signed in as</p>
            <p class="account-name" id="accountName">Guest</p>
            <p class="account-email" id="accountEmail"></p>
          </div>
          <button type="button" class="btn account-logout-btn" id="accountLogoutBtn">
            Log out
          </button>
        </div>

        <div class="account-tabs">
          <button type="button" class="account-tab active" data-tab="profile">Profile</button>
          <button type="button" class="account-tab" data-tab="orders">Orders</button>
          <button type="button" class="account-tab" data-tab="addresses">Addresses</button>
        </div>

        <!-- PROFILE PANEL -->
        <section class="account-panel active" id="accountProfilePanel">
          <p class="account-section-title">Profile</p>
          <p class="account-section-copy">
            This is your SNOOOM hub. Keep your details up to date and manage orders across drops.
          </p>

          <ul class="account-meta-list">
            <li><span>Name</span><strong id="accountProfileName">Guest</strong></li>
            <li><span>Email</span><strong id="accountProfileEmail"></strong></li>
            <li><span>Last sign in</span><strong id="accountLastSignIn">Sign in to see details</strong></li>
          </ul>

          <button type="button" class="btn account-secondary-btn" id="accountResetPassword">
            Send password reset email
          </button>

          <!-- Auth form if not logged in -->
          <div class="account-auth-form" id="accountAuthForm">
            <p class="account-section-title" style="margin-bottom:0.4rem;">Sign in or create an account</p>
            <div class="account-auth-row">
              <input type="email" id="accountAuthEmail" placeholder="you@email.com" autocomplete="email">
              <input type="password" id="accountAuthPassword" placeholder="Password" autocomplete="current-password">
            </div>
            <div class="account-auth-actions">
              <button type="button" class="btn account-secondary-btn" id="accountAuthSubmit">
                Continue
              </button>
              <span class="account-auth-mode">
                Mode,
                <button type="button" class="account-auth-toggle" id="accountAuthToggle" type="button">
                  Sign up
                </button>
              </span>
            </div>
            <p class="account-auth-message" id="accountAuthMessage"></p>
          </div>
        </section>

        <!-- ORDERS PANEL -->
        <section class="account-panel" id="accountOrdersPanel">
          <p class="account-section-title">Orders</p>
          <p class="account-section-copy">
            View your SNOOOM order history, download invoices, and track shipments.
          </p>
          <div id="accountOrdersState" class="account-state-text">
            Sign in to see your order history.
          </div>
          <div id="accountOrdersList" class="account-orders-list"></div>

          <!-- Admin tools only for allowed emails -->
          <div id="adminTools" class="admin-tools" hidden>
            <span class="admin-tag">Admin</span>
            <p class="account-section-title">All orders</p>
            <p class="admin-helper">
              You are viewing all orders stored in Supabase. Only admin accounts can see this view.
            </p>
            <div id="adminOrdersState" class="account-state-text">Loading all orders...</div>
            <div id="adminOrdersList" class="account-orders-list"></div>
          </div>
        </section>

        <!-- ADDRESSES PANEL -->
        <section class="account-panel" id="accountAddressesPanel">
          <p class="account-section-title">Addresses</p>
          <p class="account-section-copy">
            Address book support is coming soon. For now you can update shipping details during checkout.
          </p>
        </section>
      </div>
    </section>
  </main>

  <footer>
    <img src="0475b64d-f67d-4a80-a3ab-bc20f79e3667.png" alt="SNOOOM logo">
    <p>© SNOOOM. Crafted for late nights &amp; early mornings.</p>
  </footer>

  <div id="lightbox" class="lightbox">
    <span class="lightbox-close">&times;</span>
    <img class="lightbox-img" src="" alt="Expanded view">
  </div>

  <!-- Supabase client -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <script>
    // Create Supabase client
    const SUPABASE_URL = 'https://mlsqmogftuvrmsbumite.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1sc3Ftb2dmdHV2cm1zYnVtaXRlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzOTkwMDUsImV4cCI6MjA3ODk3NTAwNX0.jAagO0GygbyegkTzYo3wrhzAlbmecjmv0Do--WqknG4';
    const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    // Basic reveal animations
    const revealObserver = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, { threshold: 0.2 });

    document.querySelectorAll('.reveal').forEach(el => revealObserver.observe(el));

    // Details tabs
    const tabContent = document.getElementById('tab-content');
    const tabs = document.querySelectorAll('.tab-btn');
    const tabCopy = {
      material: `
        <div>
          <p><strong>Material</strong></p>
          <ul>
            <li>80% premium brushed cotton</li>
            <li>20% durable polyester for structure</li>
            <li>Heavyweight fleece interior for maximum comfort</li>
            <li>High-density embroidered "SNOOOM" chest graphic</li>
            <li>Reinforced hood and pocket stitching for longevity</li>
          </ul>
        </div>
      `,
      fit: `
        <div>
          <p><strong>Fit &amp; Feel</strong></p>
          <ul>
            <li>Relaxed, slightly oversized streetwear fit</li>
            <li>Structured hood that holds its shape</li>
            <li>Soft inside, smooth outside</li>
            <li>Ribbed cuffs and hem for a clean silhouette</li>
          </ul>
        </div>
      `,
      wash: `
        <div>
          <p><strong>Wash &amp; Care</strong></p>
          <ul>
            <li>Machine wash cold (30°C)</li>
            <li>Turn inside out to protect embroidery</li>
            <li>Use mild detergent</li>
            <li>No bleach</li>
            <li>Tumble dry low or hang dry</li>
            <li>Do not iron embroidery</li>
          </ul>
        </div>
      `
    };

    if (tabContent) {
      tabContent.innerHTML = tabCopy.material;
    }

    tabs.forEach(btn => {
      btn.addEventListener('click', () => {
        tabs.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        tabContent.innerHTML = tabCopy[btn.dataset.tab];
      });
    });

    // Drop signup, logging, and other existing logic
    const notifyForm = document.getElementById('notify-form');
    const nameInput = document.getElementById('signup-name');
    const emailInput = document.getElementById('email');
    const sizeSelect = document.getElementById('signup-size');
    const message = document.getElementById('formMessage');
    const accessCodeEl = document.getElementById('accessCode');
    const referralLinkEl = document.getElementById('referralLink');
    const dropStateMessageEl = document.getElementById('dropStateMessage');
    const heroSecondaryCta = document.getElementById('hero-secondary-cta');
    const dropSubmitBtn = document.getElementById('dropSubmit');
    const referralParam = new URLSearchParams(window.location.search).get('ref');

    const clientIdKey = 'snooom-user-id';
    let clientId = localStorage.getItem(clientIdKey);
    if (!clientId) {
      clientId = crypto.randomUUID ? crypto.randomUUID() : `${Date.now()}-${Math.random().toString(16).slice(2)}`;
      localStorage.setItem(clientIdKey, clientId);
    }

    function logEvent(type, metadata = {}) {
      const payload = JSON.stringify({ type, userId: clientId, metadata });
      if (typeof navigator !== 'undefined' && navigator.sendBeacon) {
        const blob = new Blob([payload], { type: 'application/json' });
        navigator.sendBeacon('/api/events', blob);
        return;
      }
      fetch('/api/events', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: payload,
        keepalive: true
      }).catch(() => {});
    }

    logEvent('page_view', { ref: referralParam || null });

    document.querySelectorAll('[data-log-event]').forEach(el => {
      el.addEventListener('click', () => {
        logEvent(el.dataset.logEvent, { location: el.dataset.logLocation || 'cta' });
      });
    });

    const trackedSections = ['hero', 'floating', 'drop'];
    const seenSections = new Set();
    const sectionObserver = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting && entry.target.id && !seenSections.has(entry.target.id)) {
          seenSections.add(entry.target.id);
          logEvent('section_view', { section: entry.target.id });
        }
      });
    }, { threshold: 0.55 });
    trackedSections.forEach(id => {
      const el = document.getElementById(id);
      if (el) sectionObserver.observe(el);
    });

    async function hydrateDropState() {
      try {
        const res = await fetch('/api/drop-state');
        if (!res.ok) throw new Error('network');
        const state = await res.json();
        if (dropStateMessageEl) dropStateMessageEl.textContent = state.message;
        applyCtaState(state.state);
        logEvent('drop_state', { state: state.state });
      } catch (err) {
        if (dropStateMessageEl) {
          dropStateMessageEl.textContent = 'Waitlist is open. Confirm your spot to get early access.';
        }
        applyCtaState('waitlist');
      }
    }

    function applyCtaState(state) {
      if (!heroSecondaryCta || !dropSubmitBtn) return;
      if (state === 'live') {
        heroSecondaryCta.textContent = 'Buy now';
        dropSubmitBtn.textContent = 'Buy now';
      } else if (state === 'post') {
        heroSecondaryCta.textContent = 'Join next drop';
        dropSubmitBtn.textContent = 'Join next drop';
      } else {
        heroSecondaryCta.textContent = 'Get early access';
        dropSubmitBtn.textContent = 'Get early access';
      }
    }

    notifyForm?.addEventListener('submit', async e => {
      e.preventDefault();
      if (!nameInput || !emailInput || !sizeSelect) return;
      const payload = {
        name: nameInput.value.trim(),
        email: emailInput.value.trim(),
        size: sizeSelect.value,
        referralCode: referralParam || undefined
      };
      if (!payload.name || !payload.email || !payload.size) {
        if (message) {
          message.textContent = 'Add your name, email, and size to lock in your spot.';
          message.style.color = '#ff7b7b';
        }
        return;
      }
      const submitButton = dropSubmitBtn || notifyForm.querySelector('button[type="submit"]');
      if (message) {
        message.textContent = 'Processing...';
        message.style.color = '#d1a655';
      }
      if (submitButton) submitButton.disabled = true;
      try {
        const res = await fetch('/api/signups', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
        const data = await res.json();
        if (!res.ok) throw new Error(data.error || 'Unable to save signup.');
        if (message) {
          message.textContent = data.message;
          message.style.color = '#d1a655';
        }
        if (accessCodeEl) {
          accessCodeEl.textContent = data.earlyAccessCode ? `Your Early Access Code: ${data.earlyAccessCode}` : '';
        }
        if (referralLinkEl) {
          referralLinkEl.innerHTML = data.referralLink ? `Share your link: <a href="${data.referralLink}" target="_blank" rel="noreferrer">${data.referralLink}</a>` : '';
        }
        logEvent('waitlist_submitted', { status: 'success', size: payload.size });
        notifyForm.reset();
      } catch (err) {
        if (message) {
          message.textContent = err.message || 'Unable to save signup right now.';
          message.style.color = '#ff7b7b';
        }
        if (accessCodeEl) accessCodeEl.textContent = '';
        if (referralLinkEl) referralLinkEl.textContent = '';
        logEvent('waitlist_submitted', { status: 'error' });
      } finally {
        if (submitButton) submitButton.disabled = false;
      }
    });

    // Button ripple
    document.querySelectorAll('.btn').forEach(btn => {
      btn.addEventListener('click', e => {
        const rect = btn.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        const ripple = document.createElement('span');
        ripple.className = 'ripple';
        ripple.style.width = ripple.style.height = `${size}px`;
        ripple.style.left = `${e.clientX - rect.left - size / 2}px`;
        ripple.style.top = `${e.clientY - rect.top - size / 2}px`;
        btn.appendChild(ripple);
        ripple.addEventListener('animationend', () => ripple.remove());
      });
    });

    // Parallax hoodie
    const hoodie = document.getElementById('parallax-hoodie');
    let parallaxTarget = 0;
    let parallaxCurrent = 0;
    let parallaxRAF = null;

    const updateParallax = () => {
      parallaxCurrent += (parallaxTarget - parallaxCurrent) * 0.08;
      if (hoodie) hoodie.style.transform = `translateY(${parallaxCurrent}px)`;
      if (Math.abs(parallaxTarget - parallaxCurrent) > 0.1) {
        parallaxRAF = requestAnimationFrame(updateParallax);
      } else {
        parallaxRAF = null;
      }
    };

    window.addEventListener('scroll', () => {
      parallaxTarget = window.scrollY * 0.05;
      if (!parallaxRAF) {
        parallaxRAF = requestAnimationFrame(updateParallax);
      }
    });

    // Size and quantity handling
    const addToCartBtn = document.querySelector('.snipcart-add-item');
    const sizeButtons = document.querySelectorAll('.size-selector button');
    let selectedSize = null;

    sizeButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        sizeButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        selectedSize = btn.textContent.trim();
        if (addToCartBtn) {
          addToCartBtn.setAttribute('data-item-custom1-value', selectedSize);
        }
      });
    });

    if (sizeButtons.length) {
      const defaultSizeBtn = Array.from(sizeButtons).find(b => b.textContent.trim() === 'M') || sizeButtons[0];
      defaultSizeBtn.classList.add('active');
      selectedSize = defaultSizeBtn.textContent.trim();
      if (addToCartBtn) {
        addToCartBtn.setAttribute('data-item-custom1-value', selectedSize);
      }
    }

    const qtyNumberEl = document.getElementById('qty-number');
    const qtyButtons = document.querySelectorAll('.quantity-selector .qty-btn');
    let qtyValue = 1;
    const updateQtyDisplay = () => {
      if (qtyNumberEl) qtyNumberEl.textContent = qtyValue;
      if (addToCartBtn) addToCartBtn.setAttribute('data-item-quantity', qtyValue);
    };
    updateQtyDisplay();

    qtyButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        if (btn.classList.contains('plus')) {
          qtyValue += 1;
        } else {
          qtyValue = Math.max(1, qtyValue - 1);
        }
        updateQtyDisplay();
      });
    });

    // Field notes
    const fallbackFieldNotes = [
      { quote: '“Feels like something you would thrift once and never find again. The weight, the drape, everything just clicks.”', author: 'Nate · Visual Designer' },
      { quote: '“Has that old athletic department energy, but cleaned up. Like a hoodie they would have kept locked in the archives.”', author: 'Lex · Creative Runner' },
      { quote: '“Wore it from a coffee run to a night session in the studio. Never stretched out, never lost shape.”', author: 'Mila · Photographer' },
      { quote: '“The embroidery hits in person. People keep asking where it is from every time I wear it.”', author: 'Dre · DJ & Curator' },
      { quote: '“This is the hoodie I grab when I do not want to overthink the outfit but still want it to feel intentional.”', author: 'Talia · Art Director' }
    ];

    const fieldNoteStack = document.getElementById('field-note-stack');
    const progressFill = document.getElementById('notes-progress');
    const fieldNotesSection = document.querySelector('.field-notes');
    const avatarSrc = 'f8e37b5e-5e45-4191-b631-f3f9c22ba0f2.png';
    let fieldNoteCards = [];
    let currentNote = 0;
    let noteInterval = null;

    async function loadFieldNotes() {
      let data = [];
      try {
        const res = await fetch('/api/field-notes');
        if (!res.ok) throw new Error('network');
        data = await res.json();
      } catch (err) {
        data = fallbackFieldNotes;
      }
      renderFieldNotes(data);
    }

    function renderFieldNotes(notes) {
      if (!fieldNoteStack) return;
      fieldNoteStack.innerHTML = '';
      notes.forEach((note, index) => {
        const card = document.createElement('article');
        card.className = 'field-note-card' + (index === 0 ? ' active' : '');
        card.innerHTML = `
          <div class="field-note-header">
            <img src="${avatarSrc}" alt="SNOOOM Hoodie" class="field-note-avatar">
            <span>Field note</span>
          </div>
          <p class="field-note-quote">${note.quote}</p>
          <span class="field-note-author">${note.author}</span>
        `;
        fieldNoteStack.appendChild(card);
      });
      fieldNoteCards = Array.from(fieldNoteStack.children);
      currentNote = 0;
      triggerProgress();
      if (fieldNotesSection) {
        const rect = fieldNotesSection.getBoundingClientRect();
        if (rect.top < window.innerHeight && rect.bottom > 0) {
          stopNoteRotation();
          startNoteRotation();
        }
      }
    }

    const notesObserver = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.target !== fieldNotesSection) return;
        if (entry.isIntersecting) {
          startNoteRotation();
        } else {
          stopNoteRotation();
        }
      });
    }, { threshold: 0.4 });

    function triggerProgress() {
      if (!progressFill) return;
      progressFill.classList.remove('animating');
      void progressFill.offsetWidth;
      progressFill.classList.add('animating');
    }

    function setActiveNote(index) {
      if (!fieldNoteCards.length) return;
      fieldNoteCards.forEach((card, idx) => {
        card.classList.toggle('active', idx === index);
      });
      triggerProgress();
      logEvent('field_note_rotate', { index });
    }

    function startNoteRotation() {
      if (!fieldNoteCards.length || noteInterval) return;
      setActiveNote(currentNote);
      noteInterval = setInterval(() => {
        currentNote = (currentNote + 1) % fieldNoteCards.length;
        setActiveNote(currentNote);
      }, 6500);
    }

    function stopNoteRotation() {
      if (!noteInterval) return;
      clearInterval(noteInterval);
      noteInterval = null;
      if (progressFill) progressFill.classList.remove('animating');
    }

    if (fieldNotesSection) {
      notesObserver.observe(fieldNotesSection);
    }

    loadFieldNotes();
    hydrateDropState();

    // Lightbox
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.querySelector('.lightbox-img');
    const lightboxClose = document.querySelector('.lightbox-close');
    let currentLightboxIndex = -1;

    const getLightboxTriggers = () => Array.from(document.querySelectorAll('.lightbox-trigger'));
    let lightboxTriggers = getLightboxTriggers();

    const openLightbox = index => {
      lightboxTriggers = getLightboxTriggers();
      currentLightboxIndex = index;
      const target = lightboxTriggers[index];
      if (!target) return;
      lightboxImg.src = target.getAttribute('src');
      lightboxImg.alt = target.getAttribute('alt') || 'Expanded view';
      lightbox.classList.add('active');
      logEvent('gallery_open', { src: lightboxImg.src });
    };

    const closeLightbox = () => {
      lightbox.classList.remove('active');
      lightboxImg.src = '';
      currentLightboxIndex = -1;
    };

    const refreshLightboxTriggers = () => {
      lightboxTriggers = getLightboxTriggers();
      lightboxTriggers.forEach((img, index) => {
        if (!img.dataset.lightboxBound) {
          img.dataset.lightboxBound = 'true';
          img.addEventListener('click', () => openLightbox(index));
        }
      });
    };

    refreshLightboxTriggers();

    lightbox.addEventListener('click', e => {
      if (e.target === lightbox || e.target === lightboxClose) {
        closeLightbox();
      }
    });

    document.addEventListener('keydown', e => {
      if (!lightbox.classList.contains('active')) return;
      if (e.key === 'Escape') {
        closeLightbox();
      }
      if (e.key === 'ArrowRight') {
        currentLightboxIndex = (currentLightboxIndex + 1) % lightboxTriggers.length;
        openLightbox(currentLightboxIndex);
      }
      if (e.key === 'ArrowLeft') {
        currentLightboxIndex = (currentLightboxIndex - 1 + lightboxTriggers.length) % lightboxTriggers.length;
        openLightbox(currentLightboxIndex);
      }
    });

    /* ACCOUNT CENTER LOGIC */

    const accountTabs = document.querySelectorAll('.account-tab');
    const accountPanels = document.querySelectorAll('.account-panel');

    const accountAvatarEl = document.getElementById('accountAvatar');
    const accountNameEl = document.getElementById('accountName');
    const accountEmailEl = document.getElementById('accountEmail');
    const accountProfileNameEl = document.getElementById('accountProfileName');
    const accountProfileEmailEl = document.getElementById('accountProfileEmail');
    const accountLastSignInEl = document.getElementById('accountLastSignIn');
    const accountLogoutBtn = document.getElementById('accountLogoutBtn');
    const accountStateEl = document.getElementById('accountOrdersState');
    const accountOrdersListEl = document.getElementById('accountOrdersList');
    const resetPasswordBtn = document.getElementById('accountResetPassword');

    const authFormEl = document.getElementById('accountAuthForm');
    const authEmailEl = document.getElementById('accountAuthEmail');
    const authPasswordEl = document.getElementById('accountAuthPassword');
    const authToggleEl = document.getElementById('accountAuthToggle');
    const authSubmitEl = document.getElementById('accountAuthSubmit');
    const authMessageEl = document.getElementById('accountAuthMessage');

    const adminToolsEl = document.getElementById('adminTools');
    const adminOrdersStateEl = document.getElementById('adminOrdersState');
    const adminOrdersListEl = document.getElementById('adminOrdersList');

    // Emails that should have admin view of all orders
    const ADMIN_EMAILS = ['hello@snooom.co'];

    let authMode = 'login'; // 'login' or 'signup'

    accountTabs.forEach(tab => {
      tab.addEventListener('click', () => {
        accountTabs.forEach(t => t.classList.remove('active'));
        accountPanels.forEach(p => p.classList.remove('active'));

        tab.classList.add('active');
        const target = tab.dataset.tab;
        if (target === 'profile') {
          document.getElementById('accountProfilePanel').classList.add('active');
        } else if (target === 'orders') {
          document.getElementById('accountOrdersPanel').classList.add('active');
        } else if (target === 'addresses') {
          document.getElementById('accountAddressesPanel').classList.add('active');
        }
      });
    });

    function setAuthMode(mode) {
      authMode = mode;
      if (authMode === 'login') {
        authToggleEl.textContent = 'Sign up';
        authMessageEl.textContent = 'Use your email and password to sign in.';
      } else {
        authToggleEl.textContent = 'Log in';
        authMessageEl.textContent = 'Create a SNOOOM account to save orders and drops.';
      }
    }

    setAuthMode('login');

    authToggleEl?.addEventListener('click', () => {
      setAuthMode(authMode === 'login' ? 'signup' : 'login');
    });

    authSubmitEl?.addEventListener('click', async () => {
      const email = authEmailEl.value.trim();
      const password = authPasswordEl.value.trim();

      if (!email || !password) {
        authMessageEl.textContent = 'Enter your email and password.';
        authMessageEl.style.color = '#ff9a9a';
        return;
      }

      authMessageEl.textContent = 'Processing...';
      authMessageEl.style.color = '#d1a655';

      try {
        if (authMode === 'signup') {
          const { error } = await supabaseClient.auth.signUp({
            email,
            password,
            options: {
              emailRedirectTo: window.location.origin + window.location.pathname
            }
          });
          if (error) throw error;
          authMessageEl.textContent = 'Check your inbox to confirm your email, then come back and sign in.';
          authMessageEl.style.color = '#d1a655';
        } else {
          const { error } = await supabaseClient.auth.signInWithPassword({ email, password });
          if (error) throw error;
          authMessageEl.textContent = 'Signed in. Loading your account...';
          authMessageEl.style.color = '#8bf2c4';
          await hydrateAccountUi();
        }
      } catch (err) {
        authMessageEl.textContent = err.message || 'Unable to process your request.';
        authMessageEl.style.color = '#ff9a9a';
      }
    });

    async function hydrateAccountUi() {
      const { data, error } = await supabaseClient.auth.getUser();
      if (error || !data?.user) {
        accountNameEl.textContent = 'Guest';
        accountEmailEl.textContent = '';
        accountProfileNameEl.textContent = 'Guest';
        accountProfileEmailEl.textContent = '';
        accountLastSignInEl.textContent = 'Sign in to see details';
        accountAvatarEl.textContent = 'S';
        accountStateEl.textContent = 'Sign in to see your order history.';
        accountOrdersListEl.innerHTML = '';
        authFormEl.style.display = 'block';
        adminToolsEl.hidden = true;
        return;
      }

      const user = data.user;
      const email = user.email || '';
      const name = user.user_metadata?.full_name || email.split('@')[0] || 'Member';

      accountNameEl.textContent = name;
      accountEmailEl.textContent = email;
      accountProfileNameEl.textContent = name;
      accountProfileEmailEl.textContent = email;
      accountLastSignInEl.textContent = user.last_sign_in_at
        ? new Date(user.last_sign_in_at).toLocaleString()
        : 'First session';

      accountAvatarEl.textContent = name.charAt(0).toUpperCase() || 'S';
      authFormEl.style.display = 'none';

      await fetchAndRenderOrders(user);

      if (ADMIN_EMAILS.includes(email)) {
        adminToolsEl.hidden = false;
        await hydrateAdminOrders();
      } else {
        adminToolsEl.hidden = true;
      }
    }

    function formatCurrency(amount, currency) {
      if (amount == null) return '';
      try {
        return new Intl.NumberFormat(undefined, {
          style: 'currency',
          currency: currency || 'USD'
        }).format(Number(amount));
      } catch (e) {
        const num = Number(amount);
        return (isNaN(num) ? amount : num.toFixed(2)) + (currency ? ` ${currency}` : '');
      }
    }

    function buildOrderItemsSummary(items) {
      if (!Array.isArray(items) || !items.length) {
        return 'Items will appear here once synced.';
      }
      return items.map(i => {
        const qty = i.quantity || i.qty || 1;
        const name = i.name || 'Item';
        return `${qty} x ${name}`;
      }).join(', ');
    }

    function statusClassFromStatus(status) {
      const s = (status || '').toLowerCase();
      if (s === 'paid' || s === 'completed') return 'paid';
      if (s === 'pending' || s === 'processing') return 'pending';
      if (s === 'failed' || s === 'refunded' || s === 'canceled' || s === 'cancelled') return 'failed';
      return 'paid';
    }

    async function fetchAndRenderOrders(user) {
      if (!user) return;
      accountStateEl.textContent = 'Loading your orders...';
      accountOrdersListEl.innerHTML = '';

      // Expecting orders table to have at least:
      // id, created_at, total, currency, invoice_number, status, items, tracking_number, invoice_url
      const { data, error } = await supabaseClient
        .from('orders')
        .select('id, created_at, total, currency, invoice_number, status, items, tracking_number, invoice_url')
        .eq('supabase_user_id', user.id)
        .order('created_at', { ascending: false });

      if (error) {
        console.error('Supabase orders fetch error', error);
        accountStateEl.innerHTML = 'We could not load your orders.<br>Check your connection and refresh this page.';
        return;
      }

      if (!data || data.length === 0) {
        accountStateEl.textContent =
          'You have not placed any orders yet. Start with the SNOOOM Hoodie and your first order will appear here.';
        return;
      }

      accountStateEl.textContent = '';
      accountOrdersListEl.innerHTML = '';

      data.forEach(order => {
        const createdAt = new Date(order.created_at);
        const itemsArray = Array.isArray(order.items) ? order.items : [];
        const statusClass = statusClassFromStatus(order.status);
        const shortId = order.id ? order.id.slice(0, 8) : '';
        const invoice = order.invoice_number || `Order ${shortId || ''}`;
        const itemSummary = buildOrderItemsSummary(itemsArray);
        const tracking = order.tracking_number || '';
        const hasInvoiceUrl = !!order.invoice_url;

        const card = document.createElement('article');
        card.className = 'account-order-card';
        card.innerHTML = `
          <div class="account-order-header">
            <div>
              <div class="account-order-id">${invoice}</div>
              <div class="account-order-meta">
                ${createdAt.toLocaleDateString()} · ${createdAt.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}
              </div>
            </div>
            <div class="account-order-total">
              ${formatCurrency(order.total, order.currency)}
            </div>
          </div>
          <div class="account-order-meta">
            <span class="account-order-status ${statusClass}">
              ${(order.status || 'paid').toUpperCase()}
            </span>
            <div style="margin-top:0.25rem;">
              ${tracking
                ? `Tracking, <strong>${tracking}</strong>`
                : 'Tracking will appear here once your order has shipped.'}
            </div>
          </div>
          <div class="account-order-items collapsed">
            <strong>Items</strong>
            <div>${itemSummary}</div>
          </div>
          <div class="account-order-toggle">View details</div>
          <div class="account-order-actions">
            <a
              ${hasInvoiceUrl ? `href="${order.invoice_url}" target="_blank" rel="noreferrer"` : 'href="#" aria-disabled="true"'}
            >
              Download invoice
            </a>
            <button type="button" data-order-id="${order.id}">Copy order id</button>
          </div>
        `;

        const itemsEl = card.querySelector('.account-order-items');
        const toggleEl = card.querySelector('.account-order-toggle');
        const copyBtn = card.querySelector('button[data-order-id]');

        toggleEl.addEventListener('click', () => {
          const collapsed = itemsEl.classList.toggle('collapsed');
          toggleEl.textContent = collapsed ? 'View details' : 'Hide details';
        });

        copyBtn.addEventListener('click', () => {
          if (!order.id) return;
          navigator.clipboard?.writeText(order.id).then(() => {
            copyBtn.textContent = 'Copied';
            setTimeout(() => {
              copyBtn.textContent = 'Copy order id';
            }, 1200);
          });
        });

        accountOrdersListEl.appendChild(card);
      });
    }

    async function hydrateAdminOrders() {
      adminOrdersStateEl.textContent = 'Loading all orders...';
      adminOrdersListEl.innerHTML = '';

      // Note, you must have a Row Level Security policy that allows admin emails to:
      // - select all orders
      // - update orders they manage
      const { data, error } = await supabaseClient
        .from('orders')
        .select('id, created_at, total, currency, invoice_number, status, items, tracking_number, invoice_url, customer_email')
        .order('created_at', { ascending: false })
        .limit(50);

      if (error) {
        console.error('Supabase admin orders error', error);
        adminOrdersStateEl.innerHTML = 'Unable to load admin orders.<br>Check your RLS policies.';
        return;
      }

      if (!data || data.length === 0) {
        adminOrdersStateEl.textContent = 'No orders stored yet.';
        return;
      }

      adminOrdersStateEl.textContent = '';
      adminOrdersListEl.innerHTML = '';

      data.forEach(order => {
        const createdAt = new Date(order.created_at);
        const itemsArray = Array.isArray(order.items) ? order.items : [];
        const statusClass = statusClassFromStatus(order.status);
        const shortId = order.id ? order.id.slice(0, 8) : '';
        const invoice = order.invoice_number || `Order ${shortId || ''}`;
        const itemSummary = buildOrderItemsSummary(itemsArray);
        const tracking = order.tracking_number || '';
        const email = order.customer_email || '';

        const card = document.createElement('article');
        card.className = 'account-order-card';
        card.innerHTML = `
          <div class="account-order-header">
            <div>
              <div class="account-order-id">${invoice}</div>
              <div class="account-order-meta">
                ${createdAt.toLocaleDateString()} · ${createdAt.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}
              </div>
              <div class="account-order-meta">Customer, ${email || 'Unknown'}</div>
            </div>
            <div class="account-order-total">
              ${formatCurrency(order.total, order.currency)}
            </div>
          </div>
          <div class="account-order-meta">
            <span class="account-order-status ${statusClass}">
              ${(order.status || 'paid').toUpperCase()}
            </span>
          </div>
          <div class="account-order-items">
            <strong>Items</strong>
            <div>${itemSummary}</div>
          </div>
          <div class="admin-order-controls">
            <div>
              <label style="display:block;margin-bottom:2px;font-size:0.76rem;">Tracking</label>
              <input type="text" class="admin-tracking-input" value="${tracking}">
            </div>
            <div>
              <label style="display:block;margin-bottom:2px;font-size:0.76rem;">Status</label>
              <select class="admin-status-select">
                <option value="paid" ${order.status === 'paid' ? 'selected' : ''}>Paid</option>
                <option value="pending" ${order.status === 'pending' ? 'selected' : ''}>Pending</option>
                <option value="processing" ${order.status === 'processing' ? 'selected' : ''}>Processing</option>
                <option value="refunded" ${order.status === 'refunded' ? 'selected' : ''}>Refunded</option>
                <option value="failed" ${order.status === 'failed' ? 'selected' : ''}>Failed</option>
                <option value="canceled" ${order.status === 'canceled' ? 'selected' : ''}>Canceled</option>
              </select>
            </div>
            <div style="display:flex;align-items:flex-end;">
              <button type="button" class="admin-save-btn">Save</button>
            </div>
          </div>
        `;

        const trackingInput = card.querySelector('.admin-tracking-input');
        const statusSelect = card.querySelector('.admin-status-select');
        const saveBtn = card.querySelector('.admin-save-btn');

        saveBtn.addEventListener('click', async () => {
          saveBtn.textContent = 'Saving...';
          saveBtn.disabled = true;
          try {
            const updates = {
              tracking_number: trackingInput.value.trim(),
              status: statusSelect.value
            };
            const { error: updateError } = await supabaseClient
              .from('orders')
              .update(updates)
              .eq('id', order.id);
            if (updateError) throw updateError;
            saveBtn.textContent = 'Saved';
            setTimeout(() => {
              saveBtn.textContent = 'Save';
              saveBtn.disabled = false;
            }, 1200);
            await hydrateAccountUi();
          } catch (err) {
            console.error('Admin update error', err);
            saveBtn.textContent = 'Error';
            setTimeout(() => {
              saveBtn.textContent = 'Save';
              saveBtn.disabled = false;
            }, 1500);
          }
        });

        adminOrdersListEl.appendChild(card);
      });
    }

    accountLogoutBtn?.addEventListener('click', async () => {
      await supabaseClient.auth.signOut();
      await hydrateAccountUi();
    });

    resetPasswordBtn?.addEventListener('click', async () => {
      const { data, error } = await supabaseClient.auth.getUser();
      if (error || !data?.user?.email) {
        alert('Sign in first to reset your password.');
        return;
      }
      const email = data.user.email;
      const redirectTo = window.location.origin + window.location.pathname;
      const { error: resetError } = await supabaseClient.auth.resetPasswordForEmail(email, {
        redirectTo
      });
      if (resetError) {
        alert('Unable to send reset email, ' + resetError.message);
      } else {
        alert('Password reset email sent to ' + email);
      }
    });

    // Hydrate account on load
    hydrateAccountUi();
  </script>

  <!-- Snipcart loader -->
  <script>
    window.SnipcartSettings = {
      publicApiKey: 'MzRjMmE0YmQtOGI5Mi00ZmUwLWFjMWItODRkOGU5NWY4Njk5NjM4OTg5ODk4MjI5MDY0Njc1',
      loadStrategy: 'on-user-interaction',
    };

    (()=>{
      var c,d;(d=(c=window.SnipcartSettings).version)!=null||(c.version="3.0");var s,S;(S=(s=window.SnipcartSettings).timeoutDuration)!=null||(s.timeoutDuration=2750);var l,p;(p=(l=window.SnipcartSettings).domain)!=null||(l.domain="cdn.snipcart.com");var w,u;(u=(w=window.SnipcartSettings).protocol)!=null||(w.protocol="https");var f=window.SnipcartSettings.version.includes("v3.0.0-ci")||window.SnipcartSettings.version!="3.0"&&window.SnipcartSettings.version.localeCompare("3.4.0",void 0,{numeric:!0,sensitivity:"base"})===-1,m=["focus","mouseover","touchmove","scroll","keydown"];window.LoadSnipcart=o;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",r):r();function r(){window.SnipcartSettings.loadStrategy?window.SnipcartSettings.loadStrategy==="on-user-interaction"&&(m.forEach(t=>document.addEventListener(t,o)),setTimeout(o,window.SnipcartSettings.timeoutDuration)):o()}var a=!1;function o(){if(a)return;a=!0;let t=document.getElementsByTagName("head")[0],e=document.querySelector("#snipcart"),i=document.querySelector(`src[src^="${window.SnipcartSettings.protocol}://${window.SnipcartSettings.domain}"][src$="snipcart.js"]`),n=document.querySelector(`link[href^="${window.SnipcartSettings.protocol}://${window.SnipcartSettings.domain}"][href$="snipcart.css"]`);e||(e=document.createElement("div"),e.id="snipcart",e.setAttribute("hidden","true"),document.body.appendChild(e)),v(e),i||(i=document.createElement("script"),i.src=`${window.SnipcartSettings.protocol}://${window.SnipcartSettings.domain}/themes/v${window.SnipcartSettings.version}/default/snipcart.js`,i.async=!0,t.appendChild(i)),n||(n=document.createElement("link"),n.rel="stylesheet",n.type="text/css",n.href=`${window.SnipcartSettings.protocol}://${window.SnipcartSettings.domain}/themes/v${window.SnipcartSettings.version}/default/snipcart.css`,t.prepend(n)),m.forEach(g=>document.removeEventListener(g,o))}function v(t){!f||(t.dataset.apiKey=window.SnipcartSettings.publicApiKey,window.SnipcartSettings.addProductBehavior&&(t.dataset.configAddProductBehavior=window.SnipcartSettings.addProductBehavior),window.SnipcartSettings.modalStyle&&(t.dataset.configModalStyle=window.SnipcartSettings.modalStyle),window.SnipcartSettings.currency&&(t.dataset.currency=window.SnipcartSettings.currency),window.SnipcartSettings.templatesUrl&&(t.dataset.templatesUrl=window.SnipcartSettings.templatesUrl))}})();
  </script>
</body>
</html>
